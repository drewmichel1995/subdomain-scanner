import React from "react";
import { Table } from "react-bootstrap";
import {
    BrowserRouter as Router,
    Switch,
    Route,
    Link
  } from "react-router-dom";

class DomainTable extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        domains: []
      };
      
    }

    componentDidMount(){
        const url = "http://localhost/server/getAvailableDomains";
        fetch(url)
        .then(res => res.json())
        .then(result => this.setState({ domains: result }))
    }
  
    render() {
        const { domains } = this.state;
        return(
            <Table striped bordered hover variant="dark">
                <thead>
                    <tr>
                        <th>Domain</th>
                    </tr>
                </thead>
                <tbody>
                    {domains.map(domain =>(
                        <tr>
                            <td>
                                <Link to={{
                                            pathname: '/subdomain',
                                            state: { name: domain }
                                }}>
                                    { domain }
                                </Link>
                            </td>
                        </tr>
                    ))}
                </tbody>
            </Table>
        )
    }
  }
   
  export default DomainTable;